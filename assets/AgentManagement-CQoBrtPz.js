import{d as f,e as _,a as l,b as i,F as h,i as N,o as n,g as v,l as b,t as p,m as g}from"./vendor-_e7UF12I.js";import{_ as D,d as r}from"./index-C3ZWiLvT.js";import{Q as w,I}from"./appwrite-DjGSp9AC.js";const x={class:"agent-management-container"},k={key:0},E={key:1},C={key:2,class:"agents-list"},F={class:"agent-info"},M={class:"agent-id"},P={key:0,class:"agent-name"},A=["onUpdate:modelValue"],U=["onClick","disabled"],V={__name:"AgentManagement",setup($){const c=f([]),d=f(!0),u=async()=>{try{const e=await r.listDocuments("684639c3000fbbd515ea","68463a24000779b721a1"),t=[...new Set(e.documents.map(s=>s.user_Id))];if(t.length===0){d.value=!1;return}const a=await Promise.all(t.map(async s=>{try{const o=(await r.listDocuments("684639c3000fbbd515ea","68465330002c380c2975",[w.equal("user_Id",s)])).documents[0];return{userId:s,displayName:o?o.displayName:"",newDisplayName:o?o.displayName:"",profileId:o?o.$id:null,profileExists:!!o}}catch(m){return console.error(`Error fetching profile for user ${s}:`,m),{userId:s,displayName:"",newDisplayName:"",profileId:null,profileExists:!1}}}));c.value=a.filter(s=>s!==null)}catch(e){console.error("Failed to fetch agents:",e)}finally{d.value=!1}},y=async e=>{try{const t={user_Id:e.userId,displayName:e.newDisplayName||e.displayName,approved:!0};e.profileExists?await r.updateDocument("684639c3000fbbd515ea","68465330002c380c2975",e.profileId,t):await r.createDocument("684639c3000fbbd515ea","68465330002c380c2975",I.unique(),t),alert(`Profile for ${e.userId} has been saved.`),u()}catch(t){console.error("Failed to update profile:",t),alert("Failed to save profile. Please try again.")}};return _(u),(e,t)=>(n(),l("div",x,[t[0]||(t[0]=i("h2",{class:"section-title"},"Agent Management",-1)),d.value?(n(),l("div",k,"Loading agents...")):c.value.length===0?(n(),l("div",E,"No agents found.")):(n(),l("ul",C,[(n(!0),l(h,null,N(c.value,a=>(n(),l("li",{key:a.userId,class:"agent-item"},[i("div",F,[i("span",M,"User ID: "+p(a.userId),1),a.displayName?(n(),l("span",P,"Current Name: "+p(a.displayName),1)):v("",!0),b(i("input",{type:"text","onUpdate:modelValue":s=>a.newDisplayName=s,placeholder:"Display Name",maxlength:"60",class:"display-name-input"},null,8,A),[[g,a.newDisplayName]])]),i("button",{onClick:s=>y(a),class:"update-btn",disabled:!a.newDisplayName},p(a.profileExists?"Update":"Create")+" Profile ",9,U)]))),128))]))]))}},L=D(V,[["__scopeId","data-v-60389033"]]);export{L as default};
//# sourceMappingURL=AgentManagement-CQoBrtPz.js.map
